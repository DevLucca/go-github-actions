name: Build
description: Build binaries
inputs:
  path:  
    description: Path to Service
    required: true
 
runs:
  using: 'composite'
  steps:
    - name: Setup Go
      uses: actions/setup-go@v4
      with:
        go-version: 1.18.1

    - name: Build
      id: build-service
      run: |
        cd ${{ inputs.path }}
        make build
        echo "service-name=$( echo ${{ matrix.service }} | sed 's#/#-#g')" >> $GITHUB_OUTPUT

    - name: Publish Artifacts
      uses: actions/upload-artifact@v3
      with:
        name: build-services-${{ steps.build-service.outputs.service-name }}
        path: ${{ inputs.path }}/bin/**.zip
